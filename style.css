const CLIENT_ID = "1458271432654983169";

document.addEventListener('DOMContentLoaded', () => {
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }

    const authForm = document.getElementById('authForm');
    const toggleBtn = document.getElementById('toggle-mode');
    const authTitle = document.getElementById('auth-title');
    const submitBtn = document.getElementById('submit-btn');
    const authCard = document.getElementById('auth-card');
    const discordBtn = document.getElementById('discordAuth');

    let isLogin = false;

    if (toggleBtn) {
        toggleBtn.addEventListener('click', () => {
            if (authCard) authCard.classList.add('flip-anim');
            
            setTimeout(() => {
                isLogin = !isLogin;
                
                if (isLogin) {
                    authTitle.innerText = "login to you're account here.";
                    submitBtn.innerText = "Login here.";
                    toggleBtn.innerText = "don't have a account? Create one here.";
                } else {
                    authTitle.innerText = "Create a account here :)";
                    submitBtn.innerText = "Submit.";
                    toggleBtn.innerText = "login to your account.";
                }
                
                if (authCard) authCard.classList.remove('flip-anim');
            }, 300);
        });
    }

    if (authForm) {
        authForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            if (submitBtn) {
                submitBtn.innerText = "...";
                submitBtn.disabled = true;
            }

            setTimeout(() => {
                window.location.href = "/homepage";
            }, 1000);
        });
    }

    if (discordBtn) {
        discordBtn.addEventListener('click', () => {
            window.location.href = `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}&response_type=code&scope=identify`;
        });
    }
});
